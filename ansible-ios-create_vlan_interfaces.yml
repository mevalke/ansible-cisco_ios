---
- name: Create one or multiple VLAN interfaces
  hosts: all
  vars_files: vars.yml
  gather_facts: false
  connection: local
  tasks:
  - name: Create VLAN interface
    cisco.ios.ios_config:
      parents: 
      - interface {{ item.name }}
      lines:
      - ip address {{ item.ip }}
      - no shutdown
    notify: "Write Config"
    when: inventory_hostname == "{{ item.switch }}"
    loop: "{{ ios_vlan_interfaces }}"
  handlers:
  - name: Write Config
    cisco.ios.ios_command:
      commands:
      - write
